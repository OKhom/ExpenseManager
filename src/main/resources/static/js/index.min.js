$(document).ready(function(){let e=new Date;setCurrentMonth(e.getMonth()),setCurrentYear(e.getFullYear()),setCategoryType(0),$("#container-transactions").hide(),$("#searchDropdown").hide(),$("#currentDateView").text(getMonthName(getCurrentMonth())+" "+getCurrentYear()),$("#categoryHead").empty().text("CATEGORIES - Expense"),showUserInformation(function(e){"ADMIN"==e.role&&window.location.assign("/admin.html"),$("#navUserName").text(e.firstName+" "+e.lastName),$("#firstNameProfile").text(e.firstName),$("#lastNameProfile").text(e.lastName),$("#emailProfile").text(e.email),$("#currencyProfile").text("("+e.currencyShortName+") "+e.currencyName),$("#roleProfile").text(e.role),setUserCurrency(e.currencyId)}),loadCategoryCards(),loadTotalAmount()}),function(e){"use strict";e("#sidebarToggle, #sidebarToggleTop").on("click",function(t){e("body").toggleClass("sidebar-toggled"),e(".sidebar").toggleClass("toggled"),e(".sidebar").hasClass("toggled")&&e(".sidebar .collapse").collapse("hide")}),e("#inputDate").datepicker({weekStart:1,todayBtn:"linked",daysOfWeekHighlighted:"0,6",autoclose:!0,todayHighlight:!0}).datepicker("setDate",new Date),e("#selectHome").on("click",function(){showUserInformation(function(e){"ADMIN"==e.role?window.location.assign("/admin.html"):window.location.assign("/index.html")})}),e("#currentDateView").click(function(){let t=new Date;setCurrentMonth(t.getMonth()),setCurrentYear(t.getFullYear()),e("#currentDateView").empty().text(getMonthName(getCurrentMonth())+" "+getCurrentYear()),loadTotalAmount(),e("#container-categories").is(":visible")?loadCategoryCards():e("#container-transactions").is(":visible")&&loadTransactionCards()}),e("#monthPrevious").click(function(){0==getCurrentMonth()?(setCurrentMonth(11),setCurrentYear(parseInt(getCurrentYear())-1)):setCurrentMonth(parseInt(getCurrentMonth())-1),e("#currentDateView").empty().text(getMonthName(getCurrentMonth())+" "+getCurrentYear()),loadTotalAmount(),e("#container-categories").is(":visible")?loadCategoryCards():e("#container-transactions").is(":visible")&&loadTransactionCards()}),e("#monthNext").click(function(){11==getCurrentMonth()?(setCurrentMonth(0),setCurrentYear(parseInt(getCurrentYear())+1)):setCurrentMonth(parseInt(getCurrentMonth())+1),e("#currentDateView").empty().text(getMonthName(getCurrentMonth())+" "+getCurrentYear()),loadTotalAmount(),e("#container-categories").is(":visible")?loadCategoryCards():e("#container-transactions").is(":visible")&&loadTransactionCards()}),e("#categoryCards").on("click","#selectAddTransaction",function(){setCurrentCategoryID(e(this).data("id")),loadCategoryById(function(t){e("#addTransactionHeader").empty().append(t.name)}),loadSubcategories(function(t){e("#listSubcategory").empty().append(e("<option>").attr("selected","").attr("value","0").append("Subcategory"));for(let a=0;a<t.length;a++)e("#listSubcategory").append(e("<option>").attr("class","font-weight-normal").attr("value",t[a].subcategoryId).append(t[a].subname))}),e("#addTransactionModal").modal("show")}),e("#submitNewTransaction").on("click",function(){if(parseFloat(e("#transactionAmount").val())>0){let t,a=/(\d{2})\/(\d{2})\/(\d{4})/,n={amount:e("#transactionAmount").val(),note:e("#inputDescription").val(),date:e("#transactionDate").val().replace(a,"$3-$1-$2")},o=getCurrentCategoryID();t=0==e("#listSubcategory").val()?null:e("#listSubcategory").val(),addTransaction(n,o,t)}else e("#modalTransactionErrorText").text("Transaction amount is empty or invalid. Try again...")}),e("#addTransactionModal").on("hidden.bs.modal",function(){setCurrentCategoryID(null);let t=e(this);t.find("select").val("0"),t.find("#inputDescription").val("").end(),t.find("#transactionAmount").val("").end(),e("#modalTransactionErrorText").empty()}),e("#transactionCards").on("click","#selectEditTransaction",function(){setCurrentCategoryID(e(this).data("cat")),setCurrentTransactionID(e(this).data("id")),loadSubcategories(function(t){e("#listEditedSubcategory").empty().append(e("<option>").attr("selected","").attr("value","0").append("select Subcategory"));for(let a=0;a<t.length;a++)e("#listEditedSubcategory").append(e("<option>").attr("class","font-weight-normal").attr("value",t[a].subcategoryId).append(t[a].subname))}),loadTransactionById(function(t){e("#editTransactionHeader").empty().append(t.categoryName).append(" - edit Transaction"),e("#listEditedSubcategory").val(t.subcategoryId),e("#inputEditedDescription").empty().val(t.note),e("#editTransactionAmount").empty().val(t.amount),e("#editDate").datepicker({weekStart:1,todayBtn:"linked",daysOfWeekHighlighted:"0,6",autoclose:!0,todayHighlight:!0}).datepicker("setDate",new Date(t.date))}),e("#editTransactionModal").modal("show")}),e("#submitUpdateTransaction").on("click",function(){if(parseFloat(e("#editTransactionAmount").val())>0){let t,a=/(\d{2})\/(\d{2})\/(\d{4})/,n={amount:e("#editTransactionAmount").val(),note:e("#inputEditedDescription").val(),date:e("#editTransactionDate").val().replace(a,"$3-$1-$2")};t=0==e("#listEditedSubcategory").val()?null:e("#listEditedSubcategory").val(),editTransaction(n,t)}else e("#modalEditTransactionErrorText").text("Transaction amount is empty or invalid. Try again...")}),e("#editTransactionModal").on("hidden.bs.modal",function(){setCurrentCategoryID(null),setCurrentTransactionID(null);let t=e(this);t.find("select").val("0"),t.find("#inputEditedDescription").val("").end(),t.find("#editTransactionAmount").val("").end(),e("#modalDeleteTransactionErrorText").empty()}),e("#transactionCards").on("click","#selectDeleteTransaction",function(){setCurrentCategoryID(e(this).data("cat")),setCurrentTransactionID(e(this).data("id")),loadTransactionById(function(t){e("#deleteTransactionHeader").empty().append(t.categoryName).append(" - delete Transaction"),e("#deletedSubcategory").empty().val(t.subcategory),e("#deletedDescription").empty().val(t.note),e("#deletedTransactionAmount").empty().val(t.amount),e("#deletedTransactionDate").empty().val(t.date)}),e("#deleteTransactionModal").modal("show")}),e("#submitDeleteTransaction").on("click",function(){deleteTransaction()}),e("#deleteTransactionModal").on("hidden.bs.modal",function(){setCurrentCategoryID(null),setCurrentTransactionID(null);let t=e(this);t.find("select").val("0"),t.find("#deletedDescription").val("").end(),t.find("#deletedTransactionAmount").val("").end(),e("#modalDeleteTransactionErrorText").empty()}),e("#categoryCards").on("click","#selectAddBudget",function(){setCurrentCategoryID(e(this).data("id")),loadCategoryById(function(t){e("#addBudgetHeader").empty().append(t.name).append(" - add budget")}),e("#addBudgetModal").modal("show")}),e("#submitAddBudget").on("click",function(){if(parseFloat(e("#budgetAmount").val())>0){let t={budget:e("#budgetAmount").val()},a=getCurrentCategoryID();addBudget(t,a)}else e("#modalBudgetErrorText").text("Budget amount is empty or invalid. Try again...")}),e("#addBudgetModal").on("hidden.bs.modal",function(){setCurrentCategoryID(null),e(this).find("input").val("").end(),e("#modalBudgetErrorText").empty()}),e("#categoryCards").on("click","#selectEditBudget",function(){setCurrentCategoryID(e(this).data("id")),loadCategoryById(function(t){e("#editBudgetHeader").empty().append(t.name).append(" - edit budget")}),loadBudgetByCategoryId(function(t){e("#newBudgetAmount").val(t.budget)}),e("#editBudgetModal").modal("show")}),e("#submitEditBudget").on("click",function(){if(parseFloat(e("#newBudgetAmount").val())>0){let t={budget:e("#newBudgetAmount").val()},a=getCurrentCategoryID();editBudget(t,a)}else e("#modalEditBudgetErrorText").text("Budget amount is empty or invalid. Try again...")}),e("#editBudgetModal").on("hidden.bs.modal",function(){setCurrentCategoryID(null),e(this).find("input").val("").end(),e("#modalEditBudgetErrorText").empty()}),e("#categoryCards").on("click","#selectDeleteBudget",function(){setCurrentCategoryID(e(this).data("id")),loadCategoryById(function(t){e("#deleteBudgetHeader").empty().append(t.name).append(" - delete budget")}),loadBudgetByCategoryId(function(t){e("#deletedBudgetAmount").val(t.budget)}),e("#deleteBudgetModal").modal("show")}),e("#submitDeleteBudget").on("click",function(){parseFloat(e("#deletedBudgetAmount").val())>0?deleteBudget():e("#modalDeleteBudgetErrorText").text("Budget amount is empty or invalid. Try again...")}),e("#deleteBudgetModal").on("hidden.bs.modal",function(){setCurrentCategoryID(null),e(this).find("input").val("").end(),e("#modalDeleteBudgetErrorText").empty()}),e("#categoryCards").on("click","#selectAddSubcategory",function(){setCurrentCategoryID(e(this).data("id")),loadCategoryById(function(t){e("#addSubcategoryHeader").empty().append(t.name).append(" - add subcategory")}),e("#addSubcategoryModal").modal("show")}),e("#submitNewSubcategory").on("click",function(){if(""!=e("#inputSubcategory").val()){let t={subname:e("#inputSubcategory").val()},a=getCurrentCategoryID();addSubcategory(t,a)}else e("#modalSubcategoryErrorText").text("Subcategory name is empty. Try again...")}),e("#addSubcategoryModal").on("hidden.bs.modal",function(){setCurrentCategoryID(null),e(this).find("input").val("").end(),e("#modalSubcategoryErrorText").empty()}),e("#categoryCards").on("click","#selectEditSubcategory",function(){setCurrentCategoryID(e(this).data("id")),loadCategoryById(function(t){e("#updateSubcategoryHeader").empty().append(t.name).append(" - update subcategory")}),loadSubcategories(function(t){e("#listUpdatingSubcategory").empty().append(e("<option>").attr("selected","").attr("value","0").append("select Subcategory"));for(let a=0;a<t.length;a++)e("#listUpdatingSubcategory").append(e("<option>").attr("class","font-weight-normal").attr("value",t[a].subcategoryId).append(t[a].subname))}),e("#updateSubcategoryModal").modal("show")}),e("#submitUpdateSubcategory").on("click",function(){if(0!=e("#listUpdatingSubcategory").val()&&""!=e("#updatedSubcategory").val()){let t=e("#listUpdatingSubcategory").val(),a={subname:e("#updatedSubcategory").val()};updateSubcategory(t,a)}else e("#modalUpdateSubcategoryErrorText").text("Old or New Subcategory name is empty. Try again...")}),e("#updateSubcategoryModal").on("hidden.bs.modal",function(){setCurrentCategoryID(null);let t=e(this);t.find("select").val("0"),t.find("input").val("").end(),e("#modalUpdateSubcategoryErrorText").empty()}),e("#categoryCards").on("click","#selectDeleteSubcategory",function(){setCurrentCategoryID(e(this).data("id")),loadCategoryById(function(t){e("#deleteSubcategoryHeader").empty().append(t.name).append(" - delete subcategory")}),loadSubcategories(function(t){e("#listDeletedSubcategory").empty().append(e("<option>").attr("selected","").attr("value","0").append("Subcategory"));for(let a=0;a<t.length;a++)e("#listDeletedSubcategory").append(e("<option>").attr("class","font-weight-normal").attr("value",t[a].subcategoryId).append(t[a].subname))}),e("#deleteSubcategoryModal").modal("show")}),e("#submitDeleteSubcategory").on("click",function(){if(0!=e("#listDeletedSubcategory").val()){let t=e("#listDeletedSubcategory").val();deleteSubcategory(t)}else e("#modalDeleteSubcategoryErrorText").text("Subcategory name is empty. Try again...")}),e("#deleteSubcategoryModal").on("hidden.bs.modal",function(){setCurrentCategoryID(null),e(this).find("select").val("0"),e("#modalDeleteSubcategoryErrorText").empty()}),e("#addCategoryModal").on("shown.bs.modal",function(){loadAllCurrencies(function(t){e("#inputCategoryCurrency").empty().append(e("<option>").attr("selected","").attr("value","0").append("Category currency"));for(let a=0;a<t.length;a++)e("#inputCategoryCurrency").append(e("<option>").attr("class","font-weight-normal").attr("value",t[a].currencyId).append(t[a].shortName+": "+t[a].name))})}),e("#submitNewCategory").on("click",function(){if(""!=e("#inputCategory").val()){let t;t=0==e("#inputCategoryCurrency").val()?getUserCurrency():e("#inputCategoryCurrency").val();let a={name:e("#inputCategory").val(),description:e("#inputCategoryDescription").val(),currencyId:t},n=getCategoryType();addCategory(a,n)}else e("#modalErrorText").text("Category name is empty. Try again...")}),e("#addCategoryModal").on("hidden.bs.modal",function(){let t=e(this);t.find("select").val("0"),t.find("input").val("").end(),e("#modalErrorText").empty()}),e("#categoryCards").on("click","#selectEditCategory",function(){setCurrentCategoryID(e(this).data("id")),loadAllCurrencies(function(t){e("#inputNewCategoryCurrency").empty().append(e("<option>").attr("selected","").attr("value","0").append("Category currency"));for(let a=0;a<t.length;a++)e("#inputNewCategoryCurrency").append(e("<option>").attr("class","font-weight-normal").attr("value",t[a].currencyId).append(t[a].shortName+": "+t[a].name))}),loadCategoryById(function(t){e("#editCategoryHeader").empty().append(t.name).append(" - edit category"),e("#inputNewCategory").empty().val(t.name),e("#inputNewCategoryCurrency").val(t.currencyId),e("#inputNewCategoryDescription").empty().val(t.description)}),e("#editCategoryModal").modal("show")}),e("#submitEditCategory").on("click",function(){if(""!=e("#inputNewCategory").val()){let t;t=0==e("#inputNewCategoryCurrency").val()?getUserCurrency():e("#inputNewCategoryCurrency").val();let a={name:e("#inputNewCategory").val(),description:e("#inputNewCategoryDescription").val(),currencyId:t};updateCategory(a)}else e("#modalEditCategoryErrorText").text("Category name is empty. Try again...")}),e("#editCategoryModal").on("hidden.bs.modal",function(){let t=e(this);t.find("select").val("0"),t.find("input").val("").end(),e("#modalEditCategoryErrorText").empty()}),e("#categoryCards").on("click","#selectDeleteCategory",function(){setCurrentCategoryID(e(this).data("id")),loadCategoryById(function(t){e("#deleteCategoryHeader").empty().append(t.name).append(" - delete category")}),e("#deleteCategoryModal").modal("show")}),e("#submitDeleteCategory").on("click",function(){let t=!1;e("#deleteCategoryWithAllTransactions").is(":checked")&&(t=!0),deleteCategory({deleteWithAllTransaction:t})}),e("#deleteCategoryModal").on("hidden.bs.modal",function(){setCurrentCategoryID(null),e("#deleteCategoryWithAllTransactions").prop("checked",!1),e("#modalDeleteCategoryErrorText").empty()}),e("#selectEditUser").on("click",function(){loadAllCurrencies(function(t){e("#inputNewUserCurrency").empty().append(e("<option>").attr("selected","").attr("value","0").append("User currency"));for(let a=0;a<t.length;a++)e("#inputNewUserCurrency").append(e("<option>").attr("class","font-weight-normal").attr("value",t[a].currencyId).append(t[a].shortName+": "+t[a].name))}),setTimeout(function(){showUserInformation(function(t){e("#editUserHeader").empty().append("Edit profile"),e("#inputNewFirstName").empty().val(t.firstName),e("#inputNewLastName").empty().val(t.lastName),e("#inputNewUserCurrency").val(t.currencyId)}),e("#editUserModal").modal("show")},70)}),e("#submitEditUser").on("click",function(){if(""!=e("#inputNewFirstName").val()&&""!=e("#inputNewLastName").val()){let t;t=0==e("#inputNewUserCurrency").val()?getUserCurrency():e("#inputNewUserCurrency").val();let a={firstName:e("#inputNewFirstName").val(),lastName:e("#inputNewLastName").val(),currencyId:t};updateUser(a)}else e("#modalEditUserErrorText").text("User's FirstName or LastName is empty. Try again...")}),e("#editUserModal").on("hidden.bs.modal",function(){let t=e(this);t.find("select").val("0"),t.find("input").val("").end(),e("#modalEditUserErrorText").empty()}),e("#selectCategories").click(function(){e("#container-categories").is(":hidden")&&(e("#container-transactions").hide(),e("#container-categories").show(),0==getCategoryType()?e("#categoryHead").empty().text("CATEGORIES - Expense"):e("#categoryHead").empty().text("CATEGORIES - Income"),loadCategoryCards())}),e("#selectTransactions").click(function(){e("#container-transactions").is(":hidden")&&(e("#container-categories").hide(),e("#container-transactions").show(),loadTransactionCards())}),e("#select-income").click(function(t){e("#container-categories").is(":visible")&&(setCategoryType(1),e("#categoryHead").empty().text("CATEGORIES - Income"),loadCategoryCards())}),e("#select-expense").click(function(t){e("#container-categories").is(":visible")&&(setCategoryType(0),e("#categoryHead").empty().text("CATEGORIES - Expense"),loadCategoryCards())}),e(window).resize(function(){e(window).width()<768&&e(".sidebar .collapse").collapse("hide"),e(window).width()<480&&!e(".sidebar").hasClass("toggled")&&(e("body").addClass("sidebar-toggled"),e(".sidebar").addClass("toggled"),e(".sidebar .collapse").collapse("hide"))}),e("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",function(t){if(e(window).width()>768){let e=t.originalEvent,a=e.wheelDelta||-e.detail;this.scrollTop+=30*(a<0?1:-1),t.preventDefault()}}),e(document).on("scroll",function(){e(this).scrollTop()>100?e(".scroll-to-top").fadeIn():e(".scroll-to-top").fadeOut()}),e(document).on("click","a.scroll-to-top",function(t){let a=e(this);e("html, body").stop().animate({scrollTop:e(a.attr("href")).offset().top},1e3,"easeInOutExpo"),t.preventDefault()})}(jQuery);